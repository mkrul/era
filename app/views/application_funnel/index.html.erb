

<div class="application-funnel">
  <div class="application-funnel__overflow-top"></div>
  <%= form_with do |f| %>
    <div class="application-funnel__overflow-bottom">
      <div class="funnel-scrollable">
        <%= render partial: "step_one", locals: { f: f } %>

        <%= render partial: "step_two", locals: { f: f } %>
      </div>
    </div>
  <% end %>
  <div class="application-funnel__overflow"></div>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $("#funnel-step-two").hide();
    // when the user clicks the next button, scroll to the next section
    $("#step-next").click(function() {
      event.preventDefault();
      $("#funnel-step-one").fadeTo("fast", 0)
      $("#funnel-step-two").show();
      $("div").animate({
        scrollTop: $("#funnel-step-two").offset().top
      }, 600).promise().done(function() {
        $("#funnel-step-one").hide();
      });
      // hide the previous section
    });

    // when the user clicks the back button, scroll to the previous section
    $("#step-back").click(function() {
      $("#funnel-step-one").show();
      $("#funnel-step-one").fadeTo("fast", 1)
      event.preventDefault();
      $('div').animate({
        scrollTop: $("#funnel-step-one").offset().top
      }, 1000).promise().done(function() {
        $("#funnel-step-two").hide();
      });
    });
  });
</script>